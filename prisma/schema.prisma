generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model IncomingCall {
  uniqueId      String         @id @db.VarChar(20)
  callerId      String         @db.VarChar(20)
  callerIdName  String?        @db.VarChar(40)
  datetime      DateTime       @db.Timestamptz(6)
  pushed        DateTime?      @db.Timestamptz(6)
  voicemessages Voicemessage[]
}

model Voicemessage {
  id                   Int          @id @default(autoincrement())
  recording            String       @db.VarChar(80)
  origtime             DateTime     @default(now())
  duration             Int          @db.Integer
  call                 IncomingCall @relation(references: [uniqueId], fields: [incomingCallUniqueId])
  pushed               DateTime?    @db.Timestamptz(6)
  incomingCallUniqueId String       @db.VarChar(20)
}
